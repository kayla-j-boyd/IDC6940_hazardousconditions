<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.5.57">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">

<meta name="author" content="Kayla Boyd">

<title>Survival of the Fittest: Cox Regression Analysis</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
/* CSS for citations */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
  margin-bottom: 0em;
}
.hanging-indent div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}</style>


<script src="coxregression_paper_files/libs/clipboard/clipboard.min.js"></script>
<script src="coxregression_paper_files/libs/quarto-html/quarto.js"></script>
<script src="coxregression_paper_files/libs/quarto-html/popper.min.js"></script>
<script src="coxregression_paper_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="coxregression_paper_files/libs/quarto-html/anchor.min.js"></script>
<link href="coxregression_paper_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="coxregression_paper_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="coxregression_paper_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="coxregression_paper_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="coxregression_paper_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">

  <script src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6"></script>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>

<script type="text/javascript">
const typesetMath = (el) => {
  if (window.MathJax) {
    // MathJax Typeset
    window.MathJax.typeset([el]);
  } else if (window.katex) {
    // KaTeX Render
    var mathElements = el.getElementsByClassName("math");
    var macros = [];
    for (var i = 0; i < mathElements.length; i++) {
      var texText = mathElements[i].firstChild;
      if (mathElements[i].tagName == "SPAN") {
        window.katex.render(texText.data, mathElements[i], {
          displayMode: mathElements[i].classList.contains('display'),
          throwOnError: false,
          macros: macros,
          fleqn: false
        });
      }
    }
  }
}
window.Quarto = {
  typesetMath
};
</script>

</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Survival of the Fittest: Cox Regression Analysis</h1>
</div>



<div class="quarto-title-meta">

    <div>
    <div class="quarto-title-meta-heading">Author</div>
    <div class="quarto-title-meta-contents">
             <p>Kayla Boyd </p>
          </div>
  </div>
    
  
    
  </div>
  


</header>


<p><a href="https://kayla-j-boyd.github.io/IDC6940_hazardousconditions/HazardousCond_slides.html#/title-slide">Slides</a></p>
<section id="introduction" class="level1" data-number="1">
<h1 data-number="1"><span class="header-section-number">1</span> Introduction</h1>
<p>The Cox Proportional Hazards Model, often referred to as Cox Regression, is a widely used statistical method for analyzing and modeling time-to-event data. Developed by Sir David Cox in 1972, this semi-parametric model is a powerful tool for understanding the relationship between predictors and the time until a specified event occurs, such as turnover, equipment failure, or customer churn.</p>
<section id="key-characteristics" class="level2" data-number="1.1">
<h2 data-number="1.1" class="anchored" data-anchor-id="key-characteristics"><span class="header-section-number">1.1</span> Key Characteristics</h2>
<ul>
<li><p>Semi-parametric Nature: Cox Regression does not assume a specific probability distribution for survival times. Instead, it focuses on the hazard ratio to evaluate the effect of predictors <span class="citation" data-cites="Zhang2016"><a href="#ref-Zhang2016" role="doc-biblioref">[1]</a></span>.</p></li>
<li><p>Time-to-Event Analysis: It models the risk (hazard) of an event occurring at a specific time, considering that the event has not occurred before that time.</p></li>
<li><p>Handles Censoring: Censoring occurs when the event hasn’t occurred for some subjects by the end of the study. Cox Regression effectively accounts for this.</p></li>
</ul>
</section>
<section id="applications-of-cox-regression" class="level2" data-number="1.2">
<h2 data-number="1.2" class="anchored" data-anchor-id="applications-of-cox-regression"><span class="header-section-number">1.2</span> Applications of Cox Regression</h2>
<p>Cox Regression is used across various fields to analyze survival data and event risks:</p>
<section id="healthcare-and-epidemiology" class="level3" data-number="1.2.1">
<h3 data-number="1.2.1" class="anchored" data-anchor-id="healthcare-and-epidemiology"><span class="header-section-number">1.2.1</span> Healthcare and Epidemiology</h3>
<ul>
<li><p>Studying survival rates in patients (e.g., cancer or heart disease).</p></li>
<li><p>Evaluating the effect of treatments, such as comparing drug efficacy <span class="citation" data-cites="Hosmer2008"><a href="#ref-Hosmer2008" role="doc-biblioref">[2]</a></span>.</p></li>
</ul>
</section>
<section id="business-and-economics" class="level3" data-number="1.2.2">
<h3 data-number="1.2.2" class="anchored" data-anchor-id="business-and-economics"><span class="header-section-number">1.2.2</span> Business and Economics</h3>
<ul>
<li><p>Predicting customer churn or employee turnover.</p></li>
<li><p>Analyzing time to equipment failure in operational systems.</p></li>
</ul>
</section>
<section id="engineering-and-reliability" class="level3" data-number="1.2.3">
<h3 data-number="1.2.3" class="anchored" data-anchor-id="engineering-and-reliability"><span class="header-section-number">1.2.3</span> Engineering and Reliability</h3>
<ul>
<li><p>Modeling the lifespan of mechanical systems or components.</p></li>
<li><p>Assessing risks in failure times of industrial systems.</p></li>
</ul>
</section>
<section id="social-sciences" class="level3" data-number="1.2.4">
<h3 data-number="1.2.4" class="anchored" data-anchor-id="social-sciences"><span class="header-section-number">1.2.4</span> Social Sciences</h3>
<ul>
<li><p>Examining time until marriage, job changes, or retirement.</p></li>
<li><p>Investigating relapse rates in criminology studies.</p></li>
</ul>
</section>
</section>
<section id="limitations-of-cox-regression" class="level2" data-number="1.3">
<h2 data-number="1.3" class="anchored" data-anchor-id="limitations-of-cox-regression"><span class="header-section-number">1.3</span> Limitations of Cox Regression</h2>
<p>While Cox Regression is versatile, it has limitations:</p>
<ol type="1">
<li><p><strong>Proportional Hazards Assumption</strong>:</p>
<ul>
<li><p>The model assumes that the hazard ratios between groups are constant over time. Violations of this assumption can lead to incorrect conclusions <span class="citation" data-cites="Hosmer2008"><a href="#ref-Hosmer2008" role="doc-biblioref">[2]</a></span>.</p></li>
<li><p><em>Example</em>: The effect of a predictor (like a treatment) may decrease or increase over time.</p></li>
</ul></li>
<li><p><strong>Inability to Model Complex Time-Dependent Effects</strong>:</p>
<ul>
<li>The standard Cox model struggles with internal time-varying covariates (e.g., changing patient conditions) without additional adjustments.</li>
</ul></li>
<li><p><strong>Difficulty with Small Sample Sizes</strong>:</p>
<ul>
<li>Requires adequate event numbers for reliable estimates.</li>
</ul></li>
<li><p><strong>No Prediction of Exact Survival Times</strong>:</p>
<ul>
<li>It estimates relative risks and hazard ratios but does not predict when an event will occur.</li>
</ul></li>
<li><p><strong>Overfitting</strong>:</p>
<ul>
<li>Including too many covariates relative to the number of events can lead to overfitting.</li>
</ul></li>
</ol>
</section>
</section>
<section id="methods" class="level1" data-number="2">
<h1 data-number="2"><span class="header-section-number">2</span> Methods</h1>
<p>In this study, we utilize the Cox Proportional Hazards Model to examine factors influencing survival. Cox Regression is a powerful tool in survival analysis that models the relationship between the survival time of subjects and one or more predictor variables. Survival can refer to development of a symptom, time to relapse, or time to death <span class="citation" data-cites="Walters2012"><a href="#ref-Walters2012" role="doc-biblioref">[3]</a></span>. Its appeal lies in its semi-parametric nature, as it does not assume a specific baseline hazard function, making it robust and popular in diverse fields like medicine, engineering, and social sciences.</p>
<section id="model-assumptions" class="level2" data-number="2.1">
<h2 data-number="2.1" class="anchored" data-anchor-id="model-assumptions"><span class="header-section-number">2.1</span> Model Assumptions</h2>
<p>A key assumption of the Cox model is the proportional hazards assumption, which asserts that the effects of different variables on the outcome (survival) are constant over time. This means that, although the baseline hazard function can vary over time, the effect of covariates on the hazard is multiplicative and time-independent. Another essential assumption pertains to censoring, where it is assumed that censoring is non-informative, meaning it is unlikely that the event of interest will be observed in all patients and missing or erroneous results can therefore not be included. This differs from logistic or linear regression.</p>
</section>
<section id="model-variants" class="level2" data-number="2.2">
<h2 data-number="2.2" class="anchored" data-anchor-id="model-variants"><span class="header-section-number">2.2</span> Model Variants</h2>
<p>The primary model employed in this study is the standard Cox Proportional Hazards model, which estimates the hazard function, <span class="math inline">\(h(t | X) = h_0(t) \exp(\beta X)\)</span>, where <span class="math inline">\(h_0(t)\)</span>represents the baseline hazard and <span class="math inline">\(\beta\)</span> represents the regression coefficients. In cases where the proportional hazards assumption does not hold, we may consider extensions like stratified Cox models, which allow for covariates that stratify the baseline hazard, or time-dependent Cox models, which can handle time-varying covariates.</p>
</section>
<section id="testing-proportional-hazards" class="level2" data-number="2.3">
<h2 data-number="2.3" class="anchored" data-anchor-id="testing-proportional-hazards"><span class="header-section-number">2.3</span> Testing Proportional Hazards</h2>
<p>To verify the proportional hazards assumption, we employ the Schoenfeld residuals test, a common diagnostic that assesses correlation between residuals and time. Graphical methods, such as log-minus-log survival plots, are also used to visually inspect proportional hazards. If these diagnostics suggest a violation of the proportional hazards assumption, adjustments are made, including consideration of time-varying covariates.</p>
<p>The image below shows an example of the graphical method using a Kaplan-Meier Survival Plot.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Load necessary libraries</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(survival)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(survminer)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Load the lung dataset</span></span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">data</span>(lung)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="co"># Fit a Kaplan-Meier survival curve</span></span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a>fit <span class="ot">&lt;-</span> <span class="fu">survfit</span>(<span class="fu">Surv</span>(time, status) <span class="sc">~</span> sex, <span class="at">data =</span> lung)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot the Kaplan-Meier survival curves</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsurvplot</span>(fit, <span class="at">data =</span> lung, </span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>           <span class="at">pval =</span> <span class="cn">TRUE</span>, </span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>           <span class="at">conf.int =</span> <span class="cn">TRUE</span>, </span>
<span id="cb1-15"><a href="#cb1-15" aria-hidden="true" tabindex="-1"></a>           <span class="at">risk.table =</span> <span class="cn">TRUE</span>, </span>
<span id="cb1-16"><a href="#cb1-16" aria-hidden="true" tabindex="-1"></a>           <span class="at">ggtheme =</span> <span class="fu">theme_minimal</span>(), </span>
<span id="cb1-17"><a href="#cb1-17" aria-hidden="true" tabindex="-1"></a>           <span class="at">legend.title =</span> <span class="st">"Sex"</span>,</span>
<span id="cb1-18"><a href="#cb1-18" aria-hidden="true" tabindex="-1"></a>           <span class="at">legend.labs =</span> <span class="fu">c</span>(<span class="st">"Male"</span>, <span class="st">"Female"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="coxregression_paper_files/figure-html/unnamed-chunk-1-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="interpretation-of-outcomes" class="level2" data-number="2.4">
<h2 data-number="2.4" class="anchored" data-anchor-id="interpretation-of-outcomes"><span class="header-section-number">2.4</span> Interpretation of Outcomes</h2>
<p>The output of a Cox model is typically interpreted in terms of hazard ratios. For each predictor, the hazard ratio describes the change in the hazard of the event (e.g., death, failure) for a one-unit increase in the predictor, holding all other factors constant. A hazard ratio greater than one indicates an increased risk, while a ratio less than one suggests a protective effect. If the risk factor is binary, the result can be interpreted as the estimated increase in the hazard ratio in patients with the risk factor vs.&nbsp;those without <span class="citation" data-cites="Hafeez2021"><a href="#ref-Hafeez2021" role="doc-biblioref">[4]</a></span>. P-values and confidence intervals around hazard ratios help determine the statistical significance and reliability of these effects.</p>
</section>
<section id="addressing-time-varying-coefficients" class="level2" data-number="2.5">
<h2 data-number="2.5" class="anchored" data-anchor-id="addressing-time-varying-coefficients"><span class="header-section-number">2.5</span> Addressing Time-Varying Coefficients</h2>
<p>To account for non-proportionality when it is detected, time-varying covariates may be introduced <span class="citation" data-cites="Zhang2018"><a href="#ref-Zhang2018" role="doc-biblioref">[5]</a></span>. This involves creating interaction terms between covariates and functions of time or using an extended Cox model framework. This approach allows the impact of certain variables on the hazard to change over time, enhancing the model’s flexibility and accuracy when the proportional hazards assumption does not strictly hold.</p>
</section>
</section>
<section id="data-analysis-and-results" class="level1" data-number="3">
<h1 data-number="3"><span class="header-section-number">3</span> Data Analysis and Results</h1>
<section id="dataset-description" class="level2" data-number="3.1">
<h2 data-number="3.1" class="anchored" data-anchor-id="dataset-description"><span class="header-section-number">3.1</span> Dataset Description</h2>
<p>We will be applying our method to this dataset from <a href="https://www.kaggle.com/datasets/davinwijaya/employee-turnover/data">Kaggle</a> that contains real data about employees at a Russian company. There are 16 variables in the dataset, both discrete and continuous, shown in the description table below.</p>
<table class="caption-top table">
<thead>
<tr class="header">
<th>Variable</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>stag</td>
<td>Experience (time)</td>
</tr>
<tr class="even">
<td>event</td>
<td>Employee turnover</td>
</tr>
<tr class="odd">
<td>gender</td>
<td>Employee’s gender</td>
</tr>
<tr class="even">
<td>age</td>
<td>Employee’s age (year)</td>
</tr>
<tr class="odd">
<td>industry</td>
<td>Employee’s industry</td>
</tr>
<tr class="even">
<td>profession</td>
<td>Employee’s profession</td>
</tr>
<tr class="odd">
<td>traffic</td>
<td>From what pipelene employee came to the company.</td>
</tr>
<tr class="even">
<td>coach</td>
<td>Presence of a coach (training) on probation</td>
</tr>
<tr class="odd">
<td>head_gender</td>
<td>Head (supervisor) gender</td>
</tr>
<tr class="even">
<td>greywage</td>
<td>The salary does not seem to the tax authorities.</td>
</tr>
<tr class="odd">
<td>way</td>
<td>Employee’s way of transportation</td>
</tr>
<tr class="even">
<td>extraversion</td>
<td>Extroversion score</td>
</tr>
<tr class="odd">
<td>independ</td>
<td>Independence score</td>
</tr>
<tr class="even">
<td>selfcontrol</td>
<td>Self control score</td>
</tr>
<tr class="odd">
<td>anxiety</td>
<td>Anxiety score</td>
</tr>
<tr class="even">
<td>novator</td>
<td>Innovator score</td>
</tr>
</tbody>
</table>
</section>
<section id="data-preparation" class="level2" data-number="3.2">
<h2 data-number="3.2" class="anchored" data-anchor-id="data-preparation"><span class="header-section-number">3.2</span> Data Preparation</h2>
<p>Read the data from our .csv file, load it, and take a quick look at some of the data.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readr)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>turnover <span class="ot">&lt;-</span> <span class="fu">read_csv</span>(<span class="st">"turnover.csv"</span>)</span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a><span class="fu">head</span>(turnover)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 6 × 16
   stag event gender   age industry        profession traffic  coach head_gender
  &lt;dbl&gt; &lt;dbl&gt; &lt;chr&gt;  &lt;dbl&gt; &lt;chr&gt;           &lt;chr&gt;      &lt;chr&gt;    &lt;chr&gt; &lt;chr&gt;      
1  7.03     1 m         35 Banks           HR         rabrecN… no    f          
2 23.0      1 m         33 Banks           HR         empjs    no    m          
3 15.9      1 f         35 PowerGeneration HR         rabrecN… no    m          
4 15.9      1 f         35 PowerGeneration HR         rabrecN… no    m          
5  8.41     1 m         32 Retail          Commercial youjs    yes   f          
6  8.97     1 f         42 manufacture     HR         empjs    yes   m          
# ℹ 7 more variables: greywage &lt;chr&gt;, way &lt;chr&gt;, extraversion &lt;dbl&gt;,
#   independ &lt;dbl&gt;, selfcontrol &lt;dbl&gt;, anxiety &lt;dbl&gt;, novator &lt;dbl&gt;</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(cowplot)</span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(broom)</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse) </span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyr)</span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(dplyr)</span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(corrplot)</span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(RColorBrewer)</span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggfortify)</span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(riskRegression)</span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(survival)</span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(stringr)</span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(zoo)</span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ranger)</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(readxl)</span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(MASS)</span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ADGofTest)</span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(survminer)</span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(car)</span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gtsummary)</span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(ggplot2)</span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gridExtra)</span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)</span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(magrittr)</span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(gt)</span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(knitr)</span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(kableExtra)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<p>Let’s check for missing and null values, censored observations (where the event being studied did not occur), and check the distribution of the data.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check for null and duplicate values</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Number of missing values :"</span>, <span class="fu">sum</span>(<span class="fu">is.na</span>(turnover)))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Number of missing values : 0</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>(<span class="st">"Number of duplicates: "</span>, turnover <span class="sc">%&gt;%</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a>    <span class="fu">duplicated</span>() <span class="sc">%&gt;%</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a>    <span class="fu">sum</span>())</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Number of duplicates:  13</code></pre>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Remove duplicate values</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>turnover <span class="ot">&lt;-</span> <span class="fu">unique</span>(turnover)</span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="co"># Check distribution of data</span></span>
<span id="cb9-6"><a href="#cb9-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-7"><a href="#cb9-7" aria-hidden="true" tabindex="-1"></a>turnover <span class="sc">%&gt;%</span></span>
<span id="cb9-8"><a href="#cb9-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> stag, <span class="at">color =</span> <span class="fu">factor</span>(event),</span>
<span id="cb9-9"><a href="#cb9-9" aria-hidden="true" tabindex="-1"></a>                              <span class="at">fill =</span> <span class="fu">factor</span>(event))) <span class="sc">+</span></span>
<span id="cb9-10"><a href="#cb9-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">y =</span> ..density..), <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb9-11"><a href="#cb9-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">alpha =</span> <span class="fl">0.05</span>) <span class="sc">+</span> <span class="fu">scale_color_brewer</span>(<span class="at">palette =</span> <span class="st">"Dark2"</span>) <span class="sc">+</span></span>
<span id="cb9-12"><a href="#cb9-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Dark2"</span>) <span class="sc">+</span> <span class="fu">theme_minimal</span>() <span class="sc">+</span> </span>
<span id="cb9-13"><a href="#cb9-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"top"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="coxregression_paper_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Check for censored observations</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>n <span class="ot">&lt;-</span> <span class="fu">dim</span>(turnover)[<span class="dv">1</span>]</span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a><span class="fu">cat</span>((n <span class="sc">-</span> <span class="fu">sum</span>(turnover<span class="sc">$</span>event))<span class="sc">/</span>n <span class="sc">*</span> <span class="dv">100</span>, <span class="st">"% of observations are censored"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>49.82079 % of observations are censored</code></pre>
</div>
</div>
<p>We can see that our data is skewed heavily to the right, we have no null values, and 49.8% of employees were not terminated.</p>
<p>Now we will take a look at our covariates and separate them based on whether they are discrete or continuous in order to better visualize the distributions.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Separate variable based on type</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a>NUM_COLS <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"stag"</span>, <span class="st">"age"</span>, <span class="st">"extraversion"</span>, <span class="st">"independ"</span>, <span class="st">"selfcontrol"</span>, <span class="st">"anxiety"</span>, <span class="st">"novator"</span>)</span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a>CAT_COLS <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"gender"</span>, <span class="st">"industry"</span>, <span class="st">"profession"</span>, <span class="st">"traffic"</span>, <span class="st">"coach"</span>, <span class="st">"head_gender"</span>, <span class="st">"greywage"</span>, <span class="st">"way"</span>)</span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="co"># Transform CAT_COLS into categorical type</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> (COL <span class="cf">in</span> CAT_COLS){</span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a>    turnover[COL] <span class="ot">&lt;-</span> turnover[COL] <span class="sc">%&gt;%</span> <span class="fu">unlist</span>() <span class="sc">%&gt;%</span> <span class="fu">factor</span>()}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<section id="categorical-covariates" class="level3" data-number="3.2.1">
<h3 data-number="3.2.1" class="anchored" data-anchor-id="categorical-covariates"><span class="header-section-number">3.2.1</span> Categorical Covariates</h3>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Categorical covariates</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="co"># Selection of covariates (that are only discrete)</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a>turnover.cat <span class="ot">&lt;-</span> turnover <span class="sc">%&gt;%</span> </span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>                <span class="fu">select_if</span>(is.factor) <span class="sc">%&gt;%</span> </span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>                <span class="fu">mutate</span>(<span class="at">event =</span> turnover<span class="sc">$</span>event)</span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-8"><a href="#cb13-8" aria-hidden="true" tabindex="-1"></a>turnover.cat <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> gender, <span class="at">color =</span> <span class="fu">factor</span>(event),</span>
<span id="cb13-9"><a href="#cb13-9" aria-hidden="true" tabindex="-1"></a>                            <span class="at">fill =</span> <span class="fu">factor</span>(event))) <span class="sc">+</span></span>
<span id="cb13-10"><a href="#cb13-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb13-11"><a href="#cb13-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">palette =</span> <span class="st">"Dark2"</span>) <span class="sc">+</span> <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Dark2"</span>) <span class="sc">+</span></span>
<span id="cb13-12"><a href="#cb13-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"top"</span>) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="coxregression_paper_files/figure-html/unnamed-chunk-5-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a>turnover.cat <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> industry, <span class="at">color =</span> <span class="fu">factor</span>(event),</span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a>                            <span class="at">fill =</span> <span class="fu">factor</span>(event))) <span class="sc">+</span></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span> </span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">palette =</span> <span class="st">"Dark2"</span>) <span class="sc">+</span> <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Dark2"</span>) <span class="sc">+</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"top"</span>) <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">panel.spacing.x =</span> <span class="fu">unit</span>(<span class="dv">30</span>, <span class="st">"mm"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="coxregression_paper_files/figure-html/unnamed-chunk-5-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>turnover.cat <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> profession, <span class="at">color =</span> <span class="fu">factor</span>(event),</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>                            <span class="at">fill =</span> <span class="fu">factor</span>(event))) <span class="sc">+</span></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span> </span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">palette =</span> <span class="st">"Dark2"</span>) <span class="sc">+</span> <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Dark2"</span>) <span class="sc">+</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"top"</span>) <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">panel.spacing.x =</span> <span class="fu">unit</span>(<span class="dv">30</span>, <span class="st">"mm"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="coxregression_paper_files/figure-html/unnamed-chunk-5-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>turnover.cat <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> traffic, <span class="at">color =</span> <span class="fu">factor</span>(event),</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>                            <span class="at">fill =</span> <span class="fu">factor</span>(event))) <span class="sc">+</span></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span> </span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">palette =</span> <span class="st">"Dark2"</span>) <span class="sc">+</span> <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Dark2"</span>) <span class="sc">+</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"top"</span>) <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">panel.spacing.x =</span> <span class="fu">unit</span>(<span class="dv">30</span>, <span class="st">"mm"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="coxregression_paper_files/figure-html/unnamed-chunk-5-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>turnover.cat <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> coach, <span class="at">color =</span> <span class="fu">factor</span>(event),</span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a>                            <span class="at">fill =</span> <span class="fu">factor</span>(event))) <span class="sc">+</span></span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span> </span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">palette =</span> <span class="st">"Dark2"</span>) <span class="sc">+</span> <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Dark2"</span>) <span class="sc">+</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"top"</span>) <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">panel.spacing.x =</span> <span class="fu">unit</span>(<span class="dv">30</span>, <span class="st">"mm"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="coxregression_paper_files/figure-html/unnamed-chunk-5-5.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a>turnover.cat <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> head_gender, <span class="at">color =</span> <span class="fu">factor</span>(event),</span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a>                            <span class="at">fill =</span> <span class="fu">factor</span>(event))) <span class="sc">+</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span> </span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">palette =</span> <span class="st">"Dark2"</span>) <span class="sc">+</span> <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Dark2"</span>) <span class="sc">+</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"top"</span>) <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">panel.spacing.x =</span> <span class="fu">unit</span>(<span class="dv">30</span>, <span class="st">"mm"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="coxregression_paper_files/figure-html/unnamed-chunk-5-6.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>turnover.cat <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> greywage, <span class="at">color =</span> <span class="fu">factor</span>(event),</span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a>                            <span class="at">fill =</span> <span class="fu">factor</span>(event))) <span class="sc">+</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span> </span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">palette =</span> <span class="st">"Dark2"</span>) <span class="sc">+</span> <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Dark2"</span>) <span class="sc">+</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"top"</span>) <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">panel.spacing.x =</span> <span class="fu">unit</span>(<span class="dv">30</span>, <span class="st">"mm"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="coxregression_paper_files/figure-html/unnamed-chunk-5-7.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>turnover.cat <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> way, <span class="at">color =</span> <span class="fu">factor</span>(event), </span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a>                                     <span class="at">fill =</span> <span class="fu">factor</span>(event))) <span class="sc">+</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span> </span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">palette =</span> <span class="st">"Dark2"</span>) <span class="sc">+</span> <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Dark2"</span>) <span class="sc">+</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"top"</span>) <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">panel.spacing.x =</span> <span class="fu">unit</span>(<span class="dv">30</span>, <span class="st">"mm"</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="coxregression_paper_files/figure-html/unnamed-chunk-5-8.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="continuous-covariates" class="level3" data-number="3.2.2">
<h3 data-number="3.2.2" class="anchored" data-anchor-id="continuous-covariates"><span class="header-section-number">3.2.2</span> Continuous Covariates</h3>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Continuous covariates</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>turnover <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> stag, <span class="at">color =</span> <span class="fu">factor</span>(event), </span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>                        <span class="at">fill =</span> <span class="fu">factor</span>(event))) <span class="sc">+</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">y =</span> ..density..), <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span> </span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">alpha =</span> <span class="fl">0.05</span>) <span class="sc">+</span>  </span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">palette =</span> <span class="st">"Dark2"</span>) <span class="sc">+</span> <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Dark2"</span>) <span class="sc">+</span></span>
<span id="cb21-7"><a href="#cb21-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"top"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="coxregression_paper_files/figure-html/unnamed-chunk-6-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a>turnover <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> event, <span class="at">color =</span> <span class="fu">factor</span>(event),</span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a>                        <span class="at">fill =</span> <span class="fu">factor</span>(event))) <span class="sc">+</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">y =</span> ..density..), <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span> </span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">alpha =</span> <span class="fl">0.05</span>) <span class="sc">+</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">palette =</span> <span class="st">"Dark2"</span>) <span class="sc">+</span> <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Dark2"</span>) <span class="sc">+</span> </span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"top"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="coxregression_paper_files/figure-html/unnamed-chunk-6-2.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>turnover <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> age, <span class="at">color =</span> <span class="fu">factor</span>(event),</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a>                        <span class="at">fill =</span> <span class="fu">factor</span>(event))) <span class="sc">+</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">y =</span> ..density..), <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">alpha =</span> <span class="fl">0.05</span>) <span class="sc">+</span></span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">palette =</span> <span class="st">"Dark2"</span>) <span class="sc">+</span> <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Dark2"</span>) <span class="sc">+</span> </span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"top"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="coxregression_paper_files/figure-html/unnamed-chunk-6-3.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>turnover <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> extraversion, <span class="at">color =</span> <span class="fu">factor</span>(event), </span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>                        <span class="at">fill =</span> <span class="fu">factor</span>(event))) <span class="sc">+</span> </span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">y =</span> ..density..), <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span> </span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">alpha =</span> <span class="fl">0.05</span>) <span class="sc">+</span> <span class="fu">scale_color_brewer</span>(<span class="at">palette =</span> <span class="st">"Dark2"</span>) <span class="sc">+</span> </span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Dark2"</span>) <span class="sc">+</span> <span class="fu">theme_minimal</span>() <span class="sc">+</span> </span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"top"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="coxregression_paper_files/figure-html/unnamed-chunk-6-4.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>turnover <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> independ, <span class="at">color =</span> <span class="fu">factor</span>(event), </span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>                        <span class="at">fill =</span> <span class="fu">factor</span>(event))) <span class="sc">+</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">y =</span> ..density..), <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span> </span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">alpha =</span> <span class="fl">0.05</span>) <span class="sc">+</span> </span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">palette =</span> <span class="st">"Dark2"</span>) <span class="sc">+</span> <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Dark2"</span>) <span class="sc">+</span> </span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"top"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="coxregression_paper_files/figure-html/unnamed-chunk-6-5.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>turnover <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> selfcontrol, <span class="at">color =</span> <span class="fu">factor</span>(event),</span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a>                        <span class="at">fill =</span> <span class="fu">factor</span>(event))) <span class="sc">+</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">y =</span> ..density..), <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">alpha =</span> <span class="fl">0.05</span>) <span class="sc">+</span> </span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">palette =</span> <span class="st">"Dark2"</span>) <span class="sc">+</span> <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Dark2"</span>) <span class="sc">+</span></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"top"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="coxregression_paper_files/figure-html/unnamed-chunk-6-6.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>turnover <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> anxiety, <span class="at">color =</span> <span class="fu">factor</span>(event),</span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a>                        <span class="at">fill =</span> <span class="fu">factor</span>(event))) <span class="sc">+</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">y =</span> ..density..), <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">alpha =</span> <span class="fl">0.05</span>) <span class="sc">+</span> </span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">palette =</span> <span class="st">"Dark2"</span>) <span class="sc">+</span> <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Dark2"</span>) <span class="sc">+</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"top"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="coxregression_paper_files/figure-html/unnamed-chunk-6-7.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a>turnover <span class="sc">%&gt;%</span> <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> novator, <span class="at">color =</span> <span class="fu">factor</span>(event),</span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a>                        <span class="at">fill =</span> <span class="fu">factor</span>(event))) <span class="sc">+</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_histogram</span>(<span class="fu">aes</span>(<span class="at">y =</span> ..density..), <span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_density</span>(<span class="at">alpha =</span> <span class="fl">0.05</span>) <span class="sc">+</span> </span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_color_brewer</span>(<span class="at">palette =</span> <span class="st">"Dark2"</span>) <span class="sc">+</span> <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Dark2"</span>) <span class="sc">+</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span> <span class="fu">theme</span>(<span class="at">legend.position =</span> <span class="st">"top"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="coxregression_paper_files/figure-html/unnamed-chunk-6-8.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>From the visualizations, we can see a few variables that might contribute to employee turnover based on their distributions. Below are the observations:</p>
<ul>
<li><p>Gender, profession, and way seem to be significant factor given the structure of distribution.</p></li>
<li><p>We can see our event (termination) occurs almost evenly throughout our dataset.</p></li>
<li><p>Age and stag are heavily right-skewed, most employees being under 40 and tenure being less than 5 years.</p></li>
</ul>
<p>Before we move on we need to plot the Kaplan-Meier Survival Plots to ensure we meet the assumption of proportional hazards.</p>
</section>
<section id="proportional-hazards-assumption" class="level3" data-number="3.2.3">
<h3 data-number="3.2.3" class="anchored" data-anchor-id="proportional-hazards-assumption"><span class="header-section-number">3.2.3</span> Proportional Hazards Assumption</h3>
<section id="gender" class="level4" data-number="3.2.3.1">
<h4 data-number="3.2.3.1" class="anchored" data-anchor-id="gender"><span class="header-section-number">3.2.3.1</span> Gender</h4>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>km_gender<span class="ot">&lt;-</span><span class="fu">survfit</span>(<span class="fu">Surv</span>(stag, event)<span class="sc">~</span>gender, <span class="at">data =</span> turnover, <span class="at">type=</span><span class="st">"kaplan-meier"</span>)</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsurvplot</span>(km_gender, <span class="at">data=</span>turnover,</span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">conf.int =</span> <span class="cn">FALSE</span>,</span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">ggtheme =</span> <span class="fu">theme_minimal</span>(),</span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">legend.labs =</span> <span class="fu">c</span>(<span class="st">"female"</span>, <span class="st">"male"</span>),</span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>           <span class="at">pval =</span> <span class="cn">TRUE</span>,</span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>           <span class="at">pval.method =</span> <span class="cn">TRUE</span>)<span class="sc">+</span></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Survival curve based on Gender"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="coxregression_paper_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="industry" class="level4" data-number="3.2.3.2">
<h4 data-number="3.2.3.2" class="anchored" data-anchor-id="industry"><span class="header-section-number">3.2.3.2</span> Industry</h4>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a>km_industry<span class="ot">&lt;-</span><span class="fu">survfit</span>(<span class="fu">Surv</span>(stag, event)<span class="sc">~</span>industry, <span class="at">data =</span> turnover, <span class="at">type =</span><span class="st">"kaplan-meier"</span>)</span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsurvplot</span>(km_industry, <span class="at">data=</span>turnover,</span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">conf.int =</span> <span class="cn">FALSE</span>,</span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">ggtheme =</span> <span class="fu">theme_minimal</span>(),</span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">pval =</span> <span class="cn">TRUE</span>,</span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">pval.method =</span> <span class="cn">TRUE</span>)<span class="sc">+</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Survival curve based on Industry"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="coxregression_paper_files/figure-html/unnamed-chunk-8-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="profession" class="level4" data-number="3.2.3.3">
<h4 data-number="3.2.3.3" class="anchored" data-anchor-id="profession"><span class="header-section-number">3.2.3.3</span> Profession</h4>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>km_profession<span class="ot">&lt;-</span><span class="fu">survfit</span>(<span class="fu">Surv</span>(stag, event)<span class="sc">~</span>profession, <span class="at">data =</span> turnover, <span class="at">type=</span><span class="st">"kaplan-meier"</span>)</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsurvplot</span>(km_profession, <span class="at">data=</span>turnover,</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">conf.int =</span> <span class="cn">FALSE</span>,</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">ggtheme =</span> <span class="fu">theme_minimal</span>(),</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">pval =</span> <span class="cn">TRUE</span>,</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">pval.method =</span> <span class="cn">TRUE</span>)<span class="sc">+</span></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Survival curve based on Profession"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="coxregression_paper_files/figure-html/unnamed-chunk-9-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="traffic" class="level4" data-number="3.2.3.4">
<h4 data-number="3.2.3.4" class="anchored" data-anchor-id="traffic"><span class="header-section-number">3.2.3.4</span> Traffic</h4>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>km_traffic<span class="ot">&lt;-</span><span class="fu">survfit</span>(<span class="fu">Surv</span>(stag, event)<span class="sc">~</span>traffic, <span class="at">data=</span> turnover, <span class="at">type=</span><span class="st">"kaplan-meier"</span>)</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsurvplot</span>(km_traffic, <span class="at">data=</span>turnover,</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">conf.int =</span> <span class="cn">FALSE</span>,</span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">ggtheme =</span> <span class="fu">theme_minimal</span>(),</span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">pval =</span> <span class="cn">TRUE</span>,</span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">pval.method =</span> <span class="cn">TRUE</span>)<span class="sc">+</span></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Survival curve based on Traffic"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="coxregression_paper_files/figure-html/unnamed-chunk-10-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="coach" class="level4" data-number="3.2.3.5">
<h4 data-number="3.2.3.5" class="anchored" data-anchor-id="coach"><span class="header-section-number">3.2.3.5</span> Coach</h4>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a>km_coach<span class="ot">&lt;-</span><span class="fu">survfit</span>(<span class="fu">Surv</span>(stag, event)<span class="sc">~</span>coach, <span class="at">data =</span> turnover, <span class="at">type=</span><span class="st">"kaplan-meier"</span>)</span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsurvplot</span>(km_coach, <span class="at">data=</span>turnover,</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">conf.int =</span> <span class="cn">FALSE</span>,</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">ggtheme =</span> <span class="fu">theme_minimal</span>(),</span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">pval =</span> <span class="cn">TRUE</span>,</span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">pval.method =</span> <span class="cn">TRUE</span>)<span class="sc">+</span></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Survival curve based on Coach"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="coxregression_paper_files/figure-html/unnamed-chunk-11-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="head_gender" class="level4" data-number="3.2.3.6">
<h4 data-number="3.2.3.6" class="anchored" data-anchor-id="head_gender"><span class="header-section-number">3.2.3.6</span> Head_gender</h4>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>km_headgender<span class="ot">&lt;-</span><span class="fu">survfit</span>(<span class="fu">Surv</span>(stag, event)<span class="sc">~</span>head_gender, <span class="at">data=</span> turnover, <span class="at">type=</span><span class="st">"kaplan-meier"</span>)</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsurvplot</span>(km_headgender, <span class="at">data=</span>turnover,</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">conf.int =</span> <span class="cn">FALSE</span>,</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">ggtheme =</span> <span class="fu">theme_minimal</span>(),</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">legend.labs =</span> <span class="fu">c</span>(<span class="st">"female"</span>, <span class="st">"male"</span>),</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">pval =</span> <span class="cn">TRUE</span>,</span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>           <span class="at">pval.method =</span> <span class="cn">TRUE</span>)<span class="sc">+</span></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Survival curve based on Head Gender"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="coxregression_paper_files/figure-html/unnamed-chunk-12-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="greywage" class="level4" data-number="3.2.3.7">
<h4 data-number="3.2.3.7" class="anchored" data-anchor-id="greywage"><span class="header-section-number">3.2.3.7</span> Greywage</h4>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>km_greywage<span class="ot">&lt;-</span><span class="fu">survfit</span>(<span class="fu">Surv</span>(stag, event)<span class="sc">~</span>greywage, <span class="at">data =</span> turnover, <span class="at">type =</span><span class="st">"kaplan-meier"</span>)</span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsurvplot</span>(km_greywage, <span class="at">data=</span>turnover,</span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a>           <span class="at">conf.int =</span> <span class="cn">FALSE</span>,</span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a>           <span class="at">ggtheme =</span> <span class="fu">theme_minimal</span>(),</span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">legend.labs =</span> <span class="fu">c</span>(<span class="st">"grey"</span>, <span class="st">"white"</span>),</span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">pval =</span> <span class="cn">TRUE</span>,</span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>           <span class="at">pval.method =</span> <span class="cn">TRUE</span>)<span class="sc">+</span></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Survival curve based on Greywage"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="coxregression_paper_files/figure-html/unnamed-chunk-13-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
</section>
<section id="way" class="level4" data-number="3.2.3.8">
<h4 data-number="3.2.3.8" class="anchored" data-anchor-id="way"><span class="header-section-number">3.2.3.8</span> Way</h4>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>km_way<span class="ot">&lt;-</span><span class="fu">survfit</span>(<span class="fu">Surv</span>(stag, event)<span class="sc">~</span>way,</span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a>                <span class="at">data=</span> turnover,</span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>                <span class="at">type=</span><span class="st">"kaplan-meier"</span>)</span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a><span class="fu">ggsurvplot</span>(km_way, <span class="at">data=</span>turnover,</span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>           <span class="at">conf.int =</span> <span class="cn">FALSE</span>,</span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>           <span class="at">ggtheme =</span> <span class="fu">theme_minimal</span>(),</span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>           <span class="at">legend.labs=</span><span class="fu">c</span>(<span class="st">"bus"</span>, <span class="st">"car"</span>, <span class="st">"foot"</span>),</span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>           <span class="at">pval =</span> <span class="cn">TRUE</span>,</span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a>           <span class="at">pval.method =</span> <span class="cn">TRUE</span>)<span class="sc">+</span></span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Survival curve based on Commuters(way)"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output-display">
<div>
<figure class="figure">
<p><img src="coxregression_paper_files/figure-html/unnamed-chunk-14-1.png" class="img-fluid figure-img" width="672"></p>
</figure>
</div>
</div>
</div>
<p>Based on the above survival curve plots, we conclude that the <em>gender, coach</em>, and <em>head_gender</em> variables do not meet the assumption of proportional hazards.</p>
</section>
</section>
</section>
<section id="statistical-modeling" class="level2" data-number="3.3">
<h2 data-number="3.3" class="anchored" data-anchor-id="statistical-modeling"><span class="header-section-number">3.3</span> Statistical Modeling</h2>
<section id="crude-model" class="level3" data-number="3.3.1">
<h3 data-number="3.3.1" class="anchored" data-anchor-id="crude-model"><span class="header-section-number">3.3.1</span> Crude Model</h3>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a>model0<span class="ot">&lt;-</span><span class="fu">coxph</span>(<span class="fu">Surv</span>(stag, event)<span class="sc">~</span>.,</span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a>                 <span class="at">data =</span> turnover)</span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model0)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Call:
coxph(formula = Surv(stag, event) ~ ., data = turnover)

  n= 1116, number of events= 560 

                                   coef exp(coef)  se(coef)      z Pr(&gt;|z|)    
genderm                       -0.110567  0.895327  0.127236 -0.869 0.384855    
age                            0.021321  1.021550  0.006992  3.050 0.002292 ** 
industryBanks                 -0.228597  0.795649  0.370386 -0.617 0.537112    
industryBuilding              -0.228859  0.795441  0.394945 -0.579 0.562272    
industryConsult               -0.387826  0.678530  0.378031 -1.026 0.304934    
industryetc                   -0.571840  0.564486  0.376067 -1.521 0.128365    
industryHoReCa                -0.641488  0.526508  0.545700 -1.176 0.239782    
industryIT                    -1.188633  0.304637  0.392874 -3.025 0.002482 ** 
industrymanufacture           -0.799654  0.449484  0.373800 -2.139 0.032415 *  
industryMining                -0.603336  0.546984  0.449444 -1.342 0.179465    
industryPharma                -1.005353  0.365916  0.480887 -2.091 0.036562 *  
industryPowerGeneration       -1.032475  0.356124  0.451676 -2.286 0.022261 *  
industryRealEstate            -1.725592  0.178068  0.588426 -2.933 0.003362 ** 
industryRetail                -1.042228  0.352668  0.363732 -2.865 0.004165 ** 
industryState                 -0.667077  0.513206  0.410168 -1.626 0.103875    
industryTelecom               -1.186918  0.305160  0.448385 -2.647 0.008119 ** 
industrytransport             -0.852135  0.426504  0.427996 -1.991 0.046482 *  
professionBusinessDevelopment  0.600890  1.823741  0.508792  1.181 0.237597    
professionCommercial           0.998866  2.715201  0.507452  1.968 0.049022 *  
professionConsult              0.570631  1.769384  0.520478  1.096 0.272921    
professionEngineer             0.998848  2.715151  0.538726  1.854 0.063726 .  
professionetc                  0.486204  1.626132  0.486495  0.999 0.317600    
professionFinance              0.054707  1.056231  0.526353  0.104 0.917220    
professionHR                   0.202198  1.224091  0.429582  0.471 0.637865    
professionIT                   0.069725  1.072213  0.491667  0.142 0.887228    
professionLaw                  0.403392  1.496894  0.647872  0.623 0.533520    
professionmanage               1.284135  3.611541  0.500159  2.567 0.010245 *  
professionMarketing            0.726077  2.066956  0.482551  1.505 0.132411    
professionPR                   0.846313  2.331035  0.640073  1.322 0.186097    
professionSales                0.505293  1.657472  0.467728  1.080 0.280002    
professionTeaching             0.617169  1.853673  0.569441  1.084 0.278446    
trafficempjs                   0.928219  2.529999  0.314661  2.950 0.003179 ** 
trafficfriends                 0.122161  1.129937  0.342264  0.357 0.721151    
trafficKA                      0.141661  1.152186  0.353556  0.401 0.688659    
trafficrabrecNErab             0.548112  1.729984  0.310084  1.768 0.077124 .  
trafficrecNErab               -0.051263  0.950029  0.381447 -0.134 0.893095    
trafficreferal                 0.368137  1.445041  0.325262  1.132 0.257711    
trafficyoujs                   0.654608  1.924387  0.309447  2.115 0.034395 *  
coachno                        0.056040  1.057640  0.111493  0.503 0.615221    
coachyes                       0.211061  1.234988  0.151771  1.391 0.164329    
head_genderm                   0.055167  1.056717  0.102616  0.538 0.590846    
greywagewhite                 -0.505741  0.603059  0.135383 -3.736 0.000187 ***
waycar                        -0.201625  0.817401  0.103831 -1.942 0.052153 .  
wayfoot                       -0.402833  0.668424  0.174165 -2.313 0.020726 *  
extraversion                   0.016623  1.016761  0.035460  0.469 0.639236    
independ                      -0.019380  0.980806  0.035771 -0.542 0.587962    
selfcontrol                   -0.045743  0.955287  0.035878 -1.275 0.202321    
anxiety                       -0.048800  0.952372  0.034633 -1.409 0.158827    
novator                        0.009108  1.009150  0.030631  0.297 0.766196    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

                              exp(coef) exp(-coef) lower .95 upper .95
genderm                          0.8953     1.1169    0.6977    1.1489
age                              1.0216     0.9789    1.0076    1.0356
industryBanks                    0.7956     1.2568    0.3850    1.6444
industryBuilding                 0.7954     1.2572    0.3668    1.7250
industryConsult                  0.6785     1.4738    0.3234    1.4235
industryetc                      0.5645     1.7715    0.2701    1.1797
industryHoReCa                   0.5265     1.8993    0.1807    1.5343
industryIT                       0.3046     3.2826    0.1410    0.6580
industrymanufacture              0.4495     2.2248    0.2160    0.9352
industryMining                   0.5470     1.8282    0.2267    1.3199
industryPharma                   0.3659     2.7329    0.1426    0.9391
industryPowerGeneration          0.3561     2.8080    0.1469    0.8631
industryRealEstate               0.1781     5.6158    0.0562    0.5642
industryRetail                   0.3527     2.8355    0.1729    0.7194
industryState                    0.5132     1.9485    0.2297    1.1466
industryTelecom                  0.3052     3.2770    0.1267    0.7348
industrytransport                0.4265     2.3446    0.1843    0.9868
professionBusinessDevelopment    1.8237     0.5483    0.6728    4.9436
professionCommercial             2.7152     0.3683    1.0043    7.3408
professionConsult                1.7694     0.5652    0.6380    4.9074
professionEngineer               2.7152     0.3683    0.9446    7.8047
professionetc                    1.6261     0.6150    0.6267    4.2195
professionFinance                1.0562     0.9468    0.3765    2.9634
professionHR                     1.2241     0.8169    0.5274    2.8410
professionIT                     1.0722     0.9327    0.4090    2.8105
professionLaw                    1.4969     0.6681    0.4205    5.3292
professionmanage                 3.6115     0.2769    1.3551    9.6256
professionMarketing              2.0670     0.4838    0.8028    5.3221
professionPR                     2.3310     0.4290    0.6648    8.1730
professionSales                  1.6575     0.6033    0.6627    4.1455
professionTeaching               1.8537     0.5395    0.6072    5.6590
trafficempjs                     2.5300     0.3953    1.3655    4.6877
trafficfriends                   1.1299     0.8850    0.5777    2.2100
trafficKA                        1.1522     0.8679    0.5762    2.3039
trafficrabrecNErab               1.7300     0.5780    0.9421    3.1768
trafficrecNErab                  0.9500     1.0526    0.4498    2.0064
trafficreferal                   1.4450     0.6920    0.7639    2.7337
trafficyoujs                     1.9244     0.5196    1.0493    3.5293
coachno                          1.0576     0.9455    0.8500    1.3160
coachyes                         1.2350     0.8097    0.9172    1.6628
head_genderm                     1.0567     0.9463    0.8642    1.2921
greywagewhite                    0.6031     1.6582    0.4625    0.7863
waycar                           0.8174     1.2234    0.6669    1.0019
wayfoot                          0.6684     1.4961    0.4751    0.9404
extraversion                     1.0168     0.9835    0.9485    1.0899
independ                         0.9808     1.0196    0.9144    1.0520
selfcontrol                      0.9553     1.0468    0.8904    1.0249
anxiety                          0.9524     1.0500    0.8899    1.0193
novator                          1.0092     0.9909    0.9503    1.0716

Concordance= 0.661  (se = 0.012 )
Likelihood ratio test= 173.8  on 49 df,   p=7e-16
Wald test            = 176.7  on 49 df,   p=3e-16
Score (logrank) test = 183.5  on 49 df,   p=&lt;2e-16</code></pre>
</div>
</div>
</section>
<section id="refining-the-model" class="level3" data-number="3.3.2">
<h3 data-number="3.3.2" class="anchored" data-anchor-id="refining-the-model"><span class="header-section-number">3.3.2</span> Refining the Model</h3>
<p>We want to refine the model to use the independent variable(s) with the greatest influence from our crude model. To do this, we will use the “step” function in R which iteratively adds or removes variables based on a chosen criterion. For this model we will use the AIC value. The Akaike Information Criterion (AIC) is a statistical metric that evaluates how well a model fits a given set of data.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="fu">step</span>(model0)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Start:  AIC=6717.67
Surv(stag, event) ~ gender + age + industry + profession + traffic + 
    coach + head_gender + greywage + way + extraversion + independ + 
    selfcontrol + anxiety + novator

               Df    AIC
- coach         2 6715.6
- novator       1 6715.8
- extraversion  1 6715.9
- head_gender   1 6716.0
- independ      1 6716.0
- gender        1 6716.4
- selfcontrol   1 6717.3
- anxiety       1 6717.7
&lt;none&gt;            6717.7
- profession   14 6720.5
- way           2 6721.8
- age           1 6724.8
- greywage      1 6728.3
- traffic       7 6741.6
- industry     15 6746.9

Step:  AIC=6715.58
Surv(stag, event) ~ gender + age + industry + profession + traffic + 
    head_gender + greywage + way + extraversion + independ + 
    selfcontrol + anxiety + novator

               Df    AIC
- novator       1 6713.8
- head_gender   1 6713.8
- extraversion  1 6713.8
- independ      1 6713.9
- gender        1 6714.3
- selfcontrol   1 6715.2
&lt;none&gt;            6715.6
- anxiety       1 6715.7
- profession   14 6718.8
- way           2 6719.2
- age           1 6722.8
- greywage      1 6726.4
- traffic       7 6739.4
- industry     15 6746.4

Step:  AIC=6713.76
Surv(stag, event) ~ gender + age + industry + profession + traffic + 
    head_gender + greywage + way + extraversion + independ + 
    selfcontrol + anxiety

               Df    AIC
- extraversion  1 6712.1
- head_gender   1 6712.1
- independ      1 6712.1
- gender        1 6712.5
- anxiety       1 6713.7
&lt;none&gt;            6713.8
- selfcontrol   1 6714.5
- profession   14 6716.9
- way           2 6717.3
- age           1 6721.1
- greywage      1 6724.4
- traffic       7 6737.5
- industry     15 6744.5

Step:  AIC=6712.05
Surv(stag, event) ~ gender + age + industry + profession + traffic + 
    head_gender + greywage + way + independ + selfcontrol + anxiety

              Df    AIC
- head_gender  1 6710.4
- gender       1 6710.8
- independ     1 6711.0
&lt;none&gt;           6712.1
- anxiety      1 6713.4
- profession  14 6715.5
- way          2 6715.6
- selfcontrol  1 6717.3
- age          1 6719.1
- greywage     1 6722.5
- traffic      7 6736.4
- industry    15 6743.3

Step:  AIC=6710.35
Surv(stag, event) ~ gender + age + industry + profession + traffic + 
    greywage + way + independ + selfcontrol + anxiety

              Df    AIC
- gender       1 6709.0
- independ     1 6709.4
&lt;none&gt;           6710.4
- anxiety      1 6711.9
- way          2 6713.9
- profession  14 6714.1
- selfcontrol  1 6715.9
- age          1 6719.1
- greywage     1 6720.9
- traffic      7 6734.4
- industry    15 6741.9

Step:  AIC=6709
Surv(stag, event) ~ age + industry + profession + traffic + greywage + 
    way + independ + selfcontrol + anxiety

              Df    AIC
- independ     1 6708.2
&lt;none&gt;           6709.0
- anxiety      1 6711.7
- profession  14 6712.1
- way          2 6712.8
- selfcontrol  1 6715.3
- age          1 6717.6
- greywage     1 6720.0
- traffic      7 6733.2
- industry    15 6740.7

Step:  AIC=6708.17
Surv(stag, event) ~ age + industry + profession + traffic + greywage + 
    way + selfcontrol + anxiety

              Df    AIC
&lt;none&gt;           6708.2
- anxiety      1 6709.7
- profession  14 6710.9
- way          2 6712.0
- selfcontrol  1 6713.4
- age          1 6716.1
- greywage     1 6719.4
- traffic      7 6732.4
- industry    15 6739.6</code></pre>
</div>
<div class="cell-output cell-output-stdout">
<pre><code>Call:
coxph(formula = Surv(stag, event) ~ age + industry + profession + 
    traffic + greywage + way + selfcontrol + anxiety, data = turnover)

                                  coef exp(coef) se(coef)      z        p
age                            0.02055   1.02076  0.00641  3.205 0.001349
industryBanks                 -0.28975   0.74845  0.36289 -0.798 0.424614
industryBuilding              -0.26582   0.76658  0.38880 -0.684 0.494175
industryConsult               -0.45691   0.63324  0.36927 -1.237 0.215967
industryetc                   -0.64403   0.52517  0.36896 -1.746 0.080890
industryHoReCa                -0.77805   0.45930  0.54017 -1.440 0.149758
industryIT                    -1.24814   0.28704  0.38553 -3.237 0.001206
industrymanufacture           -0.87933   0.41506  0.36757 -2.392 0.016744
industryMining                -0.65940   0.51716  0.44284 -1.489 0.136485
industryPharma                -1.04233   0.35263  0.47232 -2.207 0.027324
industryPowerGeneration       -1.09181   0.33561  0.44269 -2.466 0.013651
industryRealEstate            -1.81850   0.16227  0.58090 -3.130 0.001745
industryRetail                -1.10739   0.33042  0.35511 -3.118 0.001818
industryState                 -0.73784   0.47814  0.40157 -1.837 0.066154
industryTelecom               -1.25500   0.28508  0.43786 -2.866 0.004154
industrytransport             -0.86358   0.42165  0.42212 -2.046 0.040775
professionBusinessDevelopment  0.59092   1.80564  0.50153  1.178 0.238702
professionCommercial           1.00727   2.73813  0.49840  2.021 0.043279
professionConsult              0.54819   1.73012  0.50936  1.076 0.281828
professionEngineer             0.94501   2.57284  0.52648  1.795 0.072662
professionetc                  0.45756   1.58021  0.48289  0.948 0.343360
professionFinance              0.05804   1.05976  0.51797  0.112 0.910784
professionHR                   0.22086   1.24714  0.42463  0.520 0.602987
professionIT                   0.02934   1.02978  0.47418  0.062 0.950654
professionLaw                  0.31703   1.37304  0.64071  0.495 0.620736
professionmanage               1.28255   3.60582  0.49774  2.577 0.009974
professionMarketing            0.70287   2.01955  0.47822  1.470 0.141624
professionPR                   0.82179   2.27458  0.63824  1.288 0.197889
professionSales                0.50708   1.66044  0.45661  1.111 0.266774
professionTeaching             0.62625   1.87058  0.56833  1.102 0.270502
trafficempjs                   0.85644   2.35476  0.30998  2.763 0.005729
trafficfriends                 0.03493   1.03555  0.33616  0.104 0.917244
trafficKA                      0.10265   1.10810  0.34993  0.293 0.769274
trafficrabrecNErab             0.48122   1.61805  0.30601  1.573 0.115817
trafficrecNErab               -0.12679   0.88092  0.37753 -0.336 0.736996
trafficreferal                 0.30802   1.36073  0.32125  0.959 0.337642
trafficyoujs                   0.60301   1.82761  0.30666  1.966 0.049257
greywagewhite                 -0.51396   0.59812  0.13401 -3.835 0.000125
waycar                        -0.21103   0.80975  0.10259 -2.057 0.039682
wayfoot                       -0.37776   0.68539  0.17333 -2.179 0.029301
selfcontrol                   -0.06082   0.94099  0.02269 -2.680 0.007353
anxiety                       -0.04924   0.95196  0.02619 -1.880 0.060130

Likelihood ratio test=169.3  on 42 df, p=&lt; 2.2e-16
n= 1116, number of events= 560 </code></pre>
</div>
</div>
<p>Using these results, we can see that the model including independent variables <em>age, industry, profession, traffic, greywage, selfcontrol</em>, and <em>anxiety</em> produced the most accurate survival model. We will use these variables in our adjusted model.</p>
</section>
<section id="adjusted-model" class="level3" data-number="3.3.3">
<h3 data-number="3.3.3" class="anchored" data-anchor-id="adjusted-model"><span class="header-section-number">3.3.3</span> Adjusted Model</h3>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb42"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a>model1<span class="ot">&lt;-</span><span class="fu">coxph</span>(<span class="fu">Surv</span>(stag, event)<span class="sc">~</span>age <span class="sc">+</span> industry <span class="sc">+</span> profession <span class="sc">+</span> traffic <span class="sc">+</span> greywage <span class="sc">+</span> way <span class="sc">+</span> selfcontrol <span class="sc">+</span> anxiety,</span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a>                <span class="at">data =</span> turnover)</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(model1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>Call:
coxph(formula = Surv(stag, event) ~ age + industry + profession + 
    traffic + greywage + way + selfcontrol + anxiety, data = turnover)

  n= 1116, number of events= 560 

                                  coef exp(coef) se(coef)      z Pr(&gt;|z|)    
age                            0.02055   1.02076  0.00641  3.205 0.001349 ** 
industryBanks                 -0.28975   0.74845  0.36289 -0.798 0.424614    
industryBuilding              -0.26582   0.76658  0.38880 -0.684 0.494175    
industryConsult               -0.45691   0.63324  0.36927 -1.237 0.215967    
industryetc                   -0.64403   0.52517  0.36896 -1.746 0.080890 .  
industryHoReCa                -0.77805   0.45930  0.54017 -1.440 0.149758    
industryIT                    -1.24814   0.28704  0.38553 -3.237 0.001206 ** 
industrymanufacture           -0.87933   0.41506  0.36757 -2.392 0.016744 *  
industryMining                -0.65940   0.51716  0.44284 -1.489 0.136485    
industryPharma                -1.04233   0.35263  0.47232 -2.207 0.027324 *  
industryPowerGeneration       -1.09181   0.33561  0.44269 -2.466 0.013651 *  
industryRealEstate            -1.81850   0.16227  0.58090 -3.130 0.001745 ** 
industryRetail                -1.10739   0.33042  0.35511 -3.118 0.001818 ** 
industryState                 -0.73784   0.47814  0.40157 -1.837 0.066154 .  
industryTelecom               -1.25500   0.28508  0.43786 -2.866 0.004154 ** 
industrytransport             -0.86358   0.42165  0.42212 -2.046 0.040775 *  
professionBusinessDevelopment  0.59092   1.80564  0.50153  1.178 0.238702    
professionCommercial           1.00727   2.73813  0.49840  2.021 0.043279 *  
professionConsult              0.54819   1.73012  0.50936  1.076 0.281828    
professionEngineer             0.94501   2.57284  0.52648  1.795 0.072662 .  
professionetc                  0.45756   1.58021  0.48289  0.948 0.343360    
professionFinance              0.05804   1.05976  0.51797  0.112 0.910784    
professionHR                   0.22086   1.24714  0.42463  0.520 0.602987    
professionIT                   0.02934   1.02978  0.47418  0.062 0.950654    
professionLaw                  0.31703   1.37304  0.64071  0.495 0.620736    
professionmanage               1.28255   3.60582  0.49774  2.577 0.009974 ** 
professionMarketing            0.70287   2.01955  0.47822  1.470 0.141624    
professionPR                   0.82179   2.27458  0.63824  1.288 0.197889    
professionSales                0.50708   1.66044  0.45661  1.111 0.266774    
professionTeaching             0.62625   1.87058  0.56833  1.102 0.270502    
trafficempjs                   0.85644   2.35476  0.30998  2.763 0.005729 ** 
trafficfriends                 0.03493   1.03555  0.33616  0.104 0.917244    
trafficKA                      0.10265   1.10810  0.34993  0.293 0.769274    
trafficrabrecNErab             0.48122   1.61805  0.30601  1.573 0.115817    
trafficrecNErab               -0.12679   0.88092  0.37753 -0.336 0.736996    
trafficreferal                 0.30802   1.36073  0.32125  0.959 0.337642    
trafficyoujs                   0.60301   1.82761  0.30666  1.966 0.049257 *  
greywagewhite                 -0.51396   0.59812  0.13401 -3.835 0.000125 ***
waycar                        -0.21103   0.80975  0.10259 -2.057 0.039682 *  
wayfoot                       -0.37776   0.68539  0.17333 -2.179 0.029301 *  
selfcontrol                   -0.06082   0.94099  0.02269 -2.680 0.007353 ** 
anxiety                       -0.04924   0.95196  0.02619 -1.880 0.060130 .  
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

                              exp(coef) exp(-coef) lower .95 upper .95
age                              1.0208     0.9797   1.00801    1.0337
industryBanks                    0.7485     1.3361   0.36751    1.5243
industryBuilding                 0.7666     1.3045   0.35777    1.6425
industryConsult                  0.6332     1.5792   0.30707    1.3058
industryetc                      0.5252     1.9041   0.25483    1.0823
industryHoReCa                   0.4593     2.1772   0.15933    1.3240
industryIT                       0.2870     3.4839   0.13483    0.6111
industrymanufacture              0.4151     2.4093   0.20195    0.8531
industryMining                   0.5172     1.9336   0.21711    1.2319
industryPharma                   0.3526     2.8358   0.13973    0.8899
industryPowerGeneration          0.3356     2.9797   0.14093    0.7992
industryRealEstate               0.1623     6.1626   0.05197    0.5066
industryRetail                   0.3304     3.0264   0.16474    0.6627
industryState                    0.4781     2.0914   0.21764    1.0505
industryTelecom                  0.2851     3.5078   0.12085    0.6725
industrytransport                0.4217     2.3716   0.18435    0.9644
professionBusinessDevelopment    1.8056     0.5538   0.67567    4.8254
professionCommercial             2.7381     0.3652   1.03089    7.2727
professionConsult                1.7301     0.5780   0.63753    4.6951
professionEngineer               2.5728     0.3887   0.91679    7.2203
professionetc                    1.5802     0.6328   0.61331    4.0715
professionFinance                1.0598     0.9436   0.38398    2.9249
professionHR                     1.2471     0.8018   0.54258    2.8666
professionIT                     1.0298     0.9711   0.40656    2.6084
professionLaw                    1.3730     0.7283   0.39112    4.8201
professionmanage                 3.6058     0.2773   1.35933    9.5650
professionMarketing              2.0195     0.4952   0.79103    5.1560
professionPR                     2.2746     0.4396   0.65107    7.9465
professionSales                  1.6604     0.6023   0.67850    4.0634
professionTeaching               1.8706     0.5346   0.61406    5.6983
trafficempjs                     2.3548     0.4247   1.28261    4.3232
trafficfriends                   1.0355     0.9657   0.53583    2.0013
trafficKA                        1.1081     0.9024   0.55810    2.2001
trafficrabrecNErab               1.6181     0.6180   0.88821    2.9476
trafficrecNErab                  0.8809     1.1352   0.42032    1.8463
trafficreferal                   1.3607     0.7349   0.72498    2.5540
trafficyoujs                     1.8276     0.5472   1.00196    3.3336
greywagewhite                    0.5981     1.6719   0.45996    0.7778
waycar                           0.8098     1.2349   0.66226    0.9901
wayfoot                          0.6854     1.4590   0.48798    0.9627
selfcontrol                      0.9410     1.0627   0.90005    0.9838
anxiety                          0.9520     1.0505   0.90432    1.0021

Concordance= 0.66  (se = 0.012 )
Likelihood ratio test= 169.3  on 42 df,   p=&lt;2e-16
Wald test            = 172.2  on 42 df,   p=&lt;2e-16
Score (logrank) test = 178.8  on 42 df,   p=&lt;2e-16</code></pre>
</div>
</div>
</section>
<section id="hazard-ratios" class="level3" data-number="3.3.4">
<h3 data-number="3.3.4" class="anchored" data-anchor-id="hazard-ratios"><span class="header-section-number">3.3.4</span> Hazard Ratios</h3>
<p>Hazard ratios above 1 indicate a higher likelihood of the individuals in that category to experience the event (termination) in the given timeframe.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a>hr<span class="ot">=</span><span class="fu">exp</span>(model1<span class="sc">$</span>coefficients)</span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a>hr</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>                          age                 industryBanks 
                    1.0207593                     0.7484527 
             industryBuilding               industryConsult 
                    0.7665782                     0.6332371 
                  industryetc                industryHoReCa 
                    0.5251713                     0.4593025 
                   industryIT           industrymanufacture 
                    0.2870376                     0.4150602 
               industryMining                industryPharma 
                    0.5171611                     0.3526310 
      industryPowerGeneration            industryRealEstate 
                    0.3356074                     0.1622689 
               industryRetail                 industryState 
                    0.3304219                     0.4781437 
              industryTelecom             industrytransport 
                    0.2850769                     0.4216508 
professionBusinessDevelopment          professionCommercial 
                    1.8056453                     2.7381273 
            professionConsult            professionEngineer 
                    1.7301166                     2.5728377 
                professionetc             professionFinance 
                    1.5802152                     1.0597560 
                 professionHR                  professionIT 
                    1.2471440                     1.0297797 
                professionLaw              professionmanage 
                    1.3730396                     3.6058251 
          professionMarketing                  professionPR 
                    2.0195459                     2.2745773 
              professionSales            professionTeaching 
                    1.6604383                     1.8705848 
                 trafficempjs                trafficfriends 
                    2.3547649                     1.0355461 
                    trafficKA            trafficrabrecNErab 
                    1.1080976                     1.6180539 
              trafficrecNErab                trafficreferal 
                    0.8809202                     1.3607294 
                 trafficyoujs                 greywagewhite 
                    1.8276083                     0.5981229 
                       waycar                       wayfoot 
                    0.8097502                     0.6853927 
                  selfcontrol                       anxiety 
                    0.9409886                     0.9519574 </code></pre>
</div>
</div>
<p>Our results show that age increases the likelihood of employee turnover, as well as certain professions such as Commercial, Engineering, and PR.</p>
</section>
</section>
<section id="results" class="level2" data-number="3.4">
<h2 data-number="3.4" class="anchored" data-anchor-id="results"><span class="header-section-number">3.4</span> Results</h2>
<table class="caption-top table">
<colgroup>
<col style="width: 32%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header">
<th></th>
<th style="text-align: center;">Crude Model</th>
<th style="text-align: center;">Adjusted Model</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Covariate</td>
<td style="text-align: center;">Hazard ratio (95% CI), p-value</td>
<td style="text-align: center;">Hazard ratio (95% CI), p-value</td>
</tr>
<tr class="even">
<td>genderm</td>
<td style="text-align: center;">(0.70, 1.15) 0.384</td>
<td style="text-align: center;">Excluded</td>
</tr>
<tr class="odd">
<td><strong>age</strong></td>
<td style="text-align: center;"><strong>(1.01, 1.04) 0.002</strong></td>
<td style="text-align: center;"><strong>(1.01, 1.03) 0.001</strong></td>
</tr>
<tr class="even">
<td>industryBanks</td>
<td style="text-align: center;">(0.39, 1.64) 0.537</td>
<td style="text-align: center;">(0.37, 1.52) 0.424</td>
</tr>
<tr class="odd">
<td>industryBuilding</td>
<td style="text-align: center;">(0.37, 1.73) 0.562</td>
<td style="text-align: center;">(0.36, 1.64) 0.494</td>
</tr>
<tr class="even">
<td>industryConsult</td>
<td style="text-align: center;">(0.32, 1.42) 0.304</td>
<td style="text-align: center;">(0.31, 1.31) 0.215</td>
</tr>
<tr class="odd">
<td>industryetc</td>
<td style="text-align: center;">(0.27, 1.18) 0.128</td>
<td style="text-align: center;">(0.25, 1.08) 0.080</td>
</tr>
<tr class="even">
<td>industryHoReCa</td>
<td style="text-align: center;">(0.18, 1.53) 0.239</td>
<td style="text-align: center;">(0.16, 1.32) 0.149</td>
</tr>
<tr class="odd">
<td><strong>industryIT</strong></td>
<td style="text-align: center;"><strong>(0.14, 0.66) 0.002</strong></td>
<td style="text-align: center;"><strong>(0.13, 0.61) 0.001</strong></td>
</tr>
<tr class="even">
<td><strong>industrymanufacture</strong></td>
<td style="text-align: center;"><strong>(0.22, 0.94) 0.032</strong></td>
<td style="text-align: center;"><strong>(0.20, 0.85) 0.016</strong></td>
</tr>
<tr class="odd">
<td>industryMining</td>
<td style="text-align: center;">(0.23, 1.32) 0.179</td>
<td style="text-align: center;">(0.21,1.23) 0.136</td>
</tr>
<tr class="even">
<td><strong>industryPharma</strong></td>
<td style="text-align: center;"><strong>(0.14, 0.94) 0.036</strong></td>
<td style="text-align: center;"><strong>(0.14, 0.89) 0.027</strong></td>
</tr>
<tr class="odd">
<td><strong>industryPowerGeneration</strong></td>
<td style="text-align: center;"><strong>(0.15, 0.86) 0.022</strong></td>
<td style="text-align: center;"><strong>(0.14, 0.80) 0.013</strong></td>
</tr>
<tr class="even">
<td><strong>industryRealEstate</strong></td>
<td style="text-align: center;"><strong>(0.06, 0.56) 0.003</strong></td>
<td style="text-align: center;"><strong>(0.05, 0.51) 0.001</strong></td>
</tr>
<tr class="odd">
<td><strong>industryRetail</strong></td>
<td style="text-align: center;"><strong>(0.17, 0.72) 0.004</strong></td>
<td style="text-align: center;"><strong>(0.16, 0.66) 0.002</strong></td>
</tr>
<tr class="even">
<td>industryState</td>
<td style="text-align: center;">(0.23,1.15) 0.104</td>
<td style="text-align: center;">(0.22, 1.05) 0.066</td>
</tr>
<tr class="odd">
<td><strong>industryTelecom</strong></td>
<td style="text-align: center;"><strong>(0.13, 0.73) 0.008</strong></td>
<td style="text-align: center;"><strong>(0.12, 0.67) 0.004</strong></td>
</tr>
<tr class="even">
<td><strong>industrytransport</strong></td>
<td style="text-align: center;"><strong>(0.18, 0.99) 0.046</strong></td>
<td style="text-align: center;"><strong>(0.18, 0.96) 0.041</strong></td>
</tr>
<tr class="odd">
<td>professionBusinessDevelopment</td>
<td style="text-align: center;">(0.67, 4.94) 0.237</td>
<td style="text-align: center;">(0.68, 4.83) 0.238</td>
</tr>
<tr class="even">
<td><strong>professionCommercial</strong></td>
<td style="text-align: center;"><strong>(1.00, 7.34) 0.049</strong></td>
<td style="text-align: center;"><strong>(1.03, 7.27) 0.043</strong></td>
</tr>
<tr class="odd">
<td>professionConsult</td>
<td style="text-align: center;">(0.64, 4.91) 0.272</td>
<td style="text-align: center;">(0.64, 4.70) 0.281</td>
</tr>
<tr class="even">
<td>professionEngineer</td>
<td style="text-align: center;">(0.94, 7.80) 0.063</td>
<td style="text-align: center;">(0.92, 7.22) 0.072</td>
</tr>
<tr class="odd">
<td>professionetc</td>
<td style="text-align: center;">(0.63, 4.22) 0.317</td>
<td style="text-align: center;">(0.61, 4.07) 0.343</td>
</tr>
<tr class="even">
<td>professionFinance</td>
<td style="text-align: center;">(0.377, 2.96) 0.917</td>
<td style="text-align: center;">(0.38, 2.92) 0.910</td>
</tr>
<tr class="odd">
<td>professionHR</td>
<td style="text-align: center;">(0.53, 2.84) 0.638</td>
<td style="text-align: center;">(0.54, 2.87) 0.603</td>
</tr>
<tr class="even">
<td>professionIT</td>
<td style="text-align: center;">(0.41, 2.81) 0.887</td>
<td style="text-align: center;">(0.41, 2.61) 0.951</td>
</tr>
<tr class="odd">
<td>professionLaw</td>
<td style="text-align: center;">(0.42, 5.33) 0.533</td>
<td style="text-align: center;">(0.39, 4.82) 0.621</td>
</tr>
<tr class="even">
<td><strong>professionmanage</strong></td>
<td style="text-align: center;"><strong>(1.36, 9.63) 0.010</strong></td>
<td style="text-align: center;"><strong>(1.36, 9.57) 0.01</strong></td>
</tr>
<tr class="odd">
<td>professionMarketing</td>
<td style="text-align: center;">(0.80, 5.32) 0.132</td>
<td style="text-align: center;">(0.79, 5.16) 0.141</td>
</tr>
<tr class="even">
<td>professionPR</td>
<td style="text-align: center;">(0.66, 8.17) 0.186</td>
<td style="text-align: center;">(0.65, 7.95) 0.197</td>
</tr>
<tr class="odd">
<td>professionSales</td>
<td style="text-align: center;">(0.66, 4.15) 0.280</td>
<td style="text-align: center;">(0.68, 4.06) 0.266</td>
</tr>
<tr class="even">
<td>professionTeaching</td>
<td style="text-align: center;">(0.61, 5.66) 0.278</td>
<td style="text-align: center;">(0.61, 5.70) 0.270</td>
</tr>
<tr class="odd">
<td><strong>trafficempjs</strong></td>
<td style="text-align: center;"><strong>(1.37, 4.69) 0.003</strong></td>
<td style="text-align: center;"><strong>(1.28, 4.32) 0.006</strong></td>
</tr>
<tr class="even">
<td>trafficfriends</td>
<td style="text-align: center;">(0.58, 2.21) 0.721</td>
<td style="text-align: center;">(0.54, 2.00) 0.917</td>
</tr>
<tr class="odd">
<td>trafficKA</td>
<td style="text-align: center;">(0.58, 2.30) 0.688</td>
<td style="text-align: center;">(0.56, 2.20) 0.769</td>
</tr>
<tr class="even">
<td>trafficrabrecNErab</td>
<td style="text-align: center;">(0.94, 3.18) 0.077</td>
<td style="text-align: center;">(0.89, 2.95) 0.115</td>
</tr>
<tr class="odd">
<td>trafficrecNErab</td>
<td style="text-align: center;">(0.45, 2.01) 0.893</td>
<td style="text-align: center;">(0.42, 1.85) 0.736</td>
</tr>
<tr class="even">
<td>trafficreferal</td>
<td style="text-align: center;">(0.76, 2.73) 0.257</td>
<td style="text-align: center;">(0.72, 2.55) 0.337</td>
</tr>
<tr class="odd">
<td><strong>trafficyoujs</strong></td>
<td style="text-align: center;"><strong>(1.05, 3.53) 0.034</strong></td>
<td style="text-align: center;"><strong>(1.00, 3.33) 0.049</strong></td>
</tr>
<tr class="even">
<td>coachno</td>
<td style="text-align: center;">(0.85,1.316) 0.615</td>
<td style="text-align: center;">Excluded</td>
</tr>
<tr class="odd">
<td>coachyes</td>
<td style="text-align: center;">(0.92, 1.66) 0.164</td>
<td style="text-align: center;">Excluded</td>
</tr>
<tr class="even">
<td>head_genderm</td>
<td style="text-align: center;">(0.86, 1.29) 0.590</td>
<td style="text-align: center;">Excluded</td>
</tr>
<tr class="odd">
<td><strong>greywagewhite</strong></td>
<td style="text-align: center;"><strong>(0.46, 0.79) 0.0002</strong></td>
<td style="text-align: center;"><strong>(0.46, 0.78) 0.0001</strong></td>
</tr>
<tr class="even">
<td><strong>waycar</strong></td>
<td style="text-align: center;"><strong>(0.67, 1.00) 0.052</strong></td>
<td style="text-align: center;"><strong>(0.66, 0.99) 0.039</strong></td>
</tr>
<tr class="odd">
<td><strong>wayfoot</strong></td>
<td style="text-align: center;"><strong>(0.48, 0.94) 0.020</strong></td>
<td style="text-align: center;"><strong>(0.49, 0.96) 0.029</strong></td>
</tr>
<tr class="even">
<td>extraversion</td>
<td style="text-align: center;">(0.95, 1.09) 0.639</td>
<td style="text-align: center;">Excluded</td>
</tr>
<tr class="odd">
<td>independ</td>
<td style="text-align: center;">(0.91, 1.05) 0.587</td>
<td style="text-align: center;">Excluded</td>
</tr>
<tr class="even">
<td><strong>selfcontrol</strong></td>
<td style="text-align: center;"><strong>(0.89, 1.02) 0.202</strong></td>
<td style="text-align: center;"><strong>(0.90, 0.98) 0.007</strong></td>
</tr>
<tr class="odd">
<td><strong>anxiety</strong></td>
<td style="text-align: center;"><strong>(0.89, 1.02) 0.158</strong></td>
<td style="text-align: center;"><strong>(0.90, 1.00) 0.060</strong></td>
</tr>
<tr class="even">
<td>novator</td>
<td style="text-align: center;">(0.95, 1.07) 0.766</td>
<td style="text-align: center;">Excluded</td>
</tr>
</tbody>
</table>
<p>The model comparison confirms our findings and subsequent refining of the model to achieve the best fit. Variables that did not meet the assumption of proportional hazards were excluded as well as variables that were found to be non-significant.</p>
</section>
<section id="predictions" class="level2" data-number="3.5">
<h2 data-number="3.5" class="anchored" data-anchor-id="predictions"><span class="header-section-number">3.5</span> Predictions</h2>
<p>We will now use our adjusted model to predict 3-year survival rates between two employees, one age 25 and one age 55. All other variables will remain the same.</p>
<div class="cell">
<details class="code-fold">
<summary>Code</summary>
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a>new_hire <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">age =</span> <span class="fu">c</span>(<span class="dv">25</span>,<span class="dv">55</span>), <span class="at">industry =</span> <span class="fu">c</span>(<span class="st">"IT"</span>,<span class="st">"IT"</span>), <span class="at">stag=</span> <span class="fu">c</span>(<span class="dv">36</span>, <span class="dv">36</span>), <span class="at">event=</span> <span class="fu">c</span>(<span class="dv">0</span>,<span class="dv">0</span>), <span class="at">profession =</span> <span class="fu">c</span>(<span class="st">"manage"</span>,<span class="st">"manage"</span>), <span class="at">traffic =</span> <span class="fu">c</span>(<span class="st">"empjs"</span>,<span class="st">"empjs"</span>), <span class="at">greywage =</span> <span class="fu">c</span>(<span class="st">"white"</span>,<span class="st">"white"</span>), <span class="at">way =</span> <span class="fu">c</span>(<span class="st">"car"</span>,<span class="st">"car"</span>), <span class="at">independ =</span> <span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">5</span>), <span class="at">selfcontrol =</span> <span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">5</span>), <span class="at">anxiety =</span> <span class="fu">c</span>(<span class="dv">5</span>,<span class="dv">5</span>))</span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a>preds <span class="ot">&lt;-</span> <span class="fu">predict</span>(model1, <span class="at">newdata =</span> new_hire, <span class="at">type =</span> <span class="st">"survival"</span>, <span class="at">se.fit =</span> <span class="cn">TRUE</span>)</span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a>new_hire<span class="sc">$</span>prob <span class="ot">&lt;-</span> preds<span class="sc">$</span>fit</span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a>new_hire<span class="sc">$</span>lcl <span class="ot">&lt;-</span> preds<span class="sc">$</span>fit <span class="sc">-</span> <span class="fl">1.96</span><span class="sc">*</span>preds<span class="sc">$</span>se.fit</span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a>new_hire<span class="sc">$</span>ucl <span class="ot">&lt;-</span> preds<span class="sc">$</span>fit <span class="sc">+</span> <span class="fl">1.96</span><span class="sc">*</span>preds<span class="sc">$</span>se.fit</span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a>new_hire</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
<div class="cell-output cell-output-stdout">
<pre><code>  age industry stag event profession traffic greywage way independ selfcontrol
1  25       IT   36     0     manage   empjs    white car        5           5
2  55       IT   36     0     manage   empjs    white car        5           5
  anxiety      prob         lcl       ucl
1       5 0.3833291  0.12799615 0.6386621
2       5 0.1693049 -0.05614262 0.3947524</code></pre>
</div>
</div>
<p>Our results show a survival probability of 38% for the 25-year old, and 17% percent for the 55-year old.</p>
</section>
</section>
<section id="conclusion" class="level1" data-number="4">
<h1 data-number="4"><span class="header-section-number">4</span> Conclusion</h1>
<p>For companies, reducing employee turnover is paramount. Increased spending in onboarding, learning, and development means that a significant portion of resources goes into hiring a new employee. A predictive analysis model like that achieved with Cox Regression is a great tool to reduce attrition and build a healthy, productive workforce. In this paper, we have analyzed real business data to show how Cox Regression can be used to identify employee pain points and potentially decrease the risk of turnover. We have looked at data preparation and assumptions necessary to use the Cox Regression method and create a well-fit model.</p>
<p>While Cox Regression can’t guarantee employee turnover, or lack thereof, it does point us in a helpful direction to better assess a company. With expanded data among different companies and variables, we could have a better potential of identifying and mitigating risk.</p>
</section>
<section id="references" class="level1" data-number="5">
<h1 data-number="5"><span class="header-section-number">5</span> References</h1>
<div id="refs" class="references csl-bib-body" data-entry-spacing="0" role="list">
<div id="ref-Zhang2016" class="csl-entry" role="listitem">
<div class="csl-left-margin">[1] </div><div class="csl-right-inline">Z. Zhang, <span>“Semi-parametric regression model for survival data: Graphical visualization with <span>R</span>,”</span> <em>Ann. Transl. Med.</em>, vol. 4, no. 23, p. 461, Dec. 2016.</div>
</div>
<div id="ref-Hosmer2008" class="csl-entry" role="listitem">
<div class="csl-left-margin">[2] </div><div class="csl-right-inline">D. W. Hosmer, S. Lemeshow, and S. May, <em>Applied survival analysis</em>, 2nd ed. in Wiley series in probability and statistics. Chichester, England: Wiley-Blackwell, 2008.</div>
</div>
<div id="ref-Walters2012" class="csl-entry" role="listitem">
<div class="csl-left-margin">[3] </div><div class="csl-right-inline">S. J. Walters, <span>“Analyzing time to event outcomes with a cox regression model,”</span> <em>Wiley Interdiscip. Rev. Comput. Stat.</em>, vol. 4, no. 3, pp. 310–315, May 2012.</div>
</div>
<div id="ref-Hafeez2021" class="csl-entry" role="listitem">
<div class="csl-left-margin">[4] </div><div class="csl-right-inline">S. Abd ElHafeez, G. D’Arrigo, D. Leonardis, M. Fusaro, G. Tripepi, and S. Roumeliotis, <span>“Methods to analyze time-to-event data: The cox regression analysis,”</span> <em>Oxid. Med. Cell. Longev.</em>, vol. 2021, no. 1, p. 1302811, Nov. 2021.</div>
</div>
<div id="ref-Zhang2018" class="csl-entry" role="listitem">
<div class="csl-left-margin">[5] </div><div class="csl-right-inline">Z. Zhang, J. Reinikainen, K. A. Adeleke, M. E. Pieterse, and C. G. M. Groothuis-Oudshoorn, <span>“Time-varying covariates and coefficients in cox regression models,”</span> <em>Ann. Transl. Med.</em>, vol. 6, no. 7, pp. 121–121, Apr. 2018.</div>
</div>
</div>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    // For code content inside modals, clipBoardJS needs to be initialized with a container option
    // TODO: Check when it could be a function (https://github.com/zenorocha/clipboard.js/issues/860)
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
          // default icon
          link.classList.add("external");
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>